<!-- How It Works Section -->
<section id="tokenization" class="tokenization">
    <div class="container">
        <h2>How It Works</h2>
        
        <!-- Modern process flow -->
        <div class="process-flow-container">
            <!-- Featured explanation -->
            <div class="process-hero">
                <h3>Real Estate Tokenization Made Simple</h3>
                <p>Sharmo transforms property ownership by securely converting real estate into digital tokens on the Ethereum blockchain. This enables fractional ownership with minimal investment, providing instant liquidity and global access to property markets.</p>
                <div class="process-stats">
                    <div class="process-stat">
                        <div class="stat-number">4-step</div>
                        <div class="stat-label">Simple Process</div>
                    </div>
                    <div class="process-stat">
                        <div class="stat-number">24/7</div>
                        <div class="stat-label">Token Trading</div>
                    </div>
                    <div class="process-stat">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">Transparency</div>
                    </div>
                </div>
            </div>
            
            <!-- Visual process timeline -->
            <div class="process-timeline">
                <div class="timeline-track"></div>
                
                <div class="timeline-step step-active" data-step="1">
                    <div class="step-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"></path>
                            <path d="M9 22V12H15V22"></path>
                        </svg>
                    </div>
                    <div class="step-content">
                        <h4>Asset Verification</h4>
                        <p>We conduct thorough legal due diligence to verify property titles, ownership history, and regulatory compliance to ensure complete legal certainty.</p>
                    </div>
                </div>
                
                <div class="timeline-step" data-step="2">
                    <div class="step-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 6V12L16 14"></path>
                        </svg>
                    </div>
                    <div class="step-content">
                        <h4>Tokenization</h4>
                        <p>Our smart contracts create blockchain tokens that represent legally-backed shares of the property with transparent ownership rights and automated governance.</p>
                    </div>
                </div>
                
                <div class="timeline-step" data-step="3">
                    <div class="step-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 12H18L15 21L9 3L6 12H2"></path>
                        </svg>
                    </div>
                    <div class="step-content">
                        <h4>Distribution</h4>
                        <p>Property tokens are listed on decentralized exchanges for 24/7 trading, transforming the traditional months-long real estate transactions into seconds.</p>
                    </div>
                </div>
                
                <div class="timeline-step" data-step="4">
                    <div class="step-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 4H18C18.5304 4 19.0391 4.21071 19.4142 4.58579C19.7893 4.96086 20 5.46957 20 6V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H6C5.46957 22 4.96086 21.7893 4.58579 21.4142C4.21071 21.0391 4 20.5304 4 20V6C4 5.46957 4.21071 4.96086 4.58579 4.58579C4.96086 4.21071 5.46957 4 6 4H8"></path>
                            <path d="M15 2H9C8.44772 2 8 2.44772 8 3V5C8 5.55228 8.44772 6 9 6H15C15.5523 6 16 5.55228 16 5V3C16 2.44772 15.5523 2 15 2Z"></path>
                        </svg>
                    </div>
                    <div class="step-content">
                        <h4>Management</h4>
                        <p>Automated smart contracts handle all aspects of property administration, including rental income distribution and transparent decision-making.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Blockchain standards with modern tabs -->
        <div class="blockchain-standards">
            <h3 class="standards-heading">Blockchain Standards We Use</h3>
            
            <div class="standards-container">
                <div class="standards-tabs">
                    <button class="standard-tab active" data-standard="erc20">
                        <img src="images/ethereum/eth-black.png" alt="ERC-20" class="tab-icon">
                        <span class="tab-name">ERC-20</span>
                    </button>
                    <button class="standard-tab" data-standard="erc721">
                        <img src="images/ethereum/eth.png" alt="ERC-721" class="tab-icon">
                        <span class="tab-name">ERC-721</span>
                    </button>
                    <button class="standard-tab" data-standard="erc1155">
                        <img src="images/ethereum/eth-orange.png" alt="ERC-1155" class="tab-icon">
                        <span class="tab-name">ERC-1155</span>
                    </button>
                </div>
                
                <div class="standards-content">
                    <div class="standard-panel active" id="erc20-panel">
                        <div class="panel-header">
                            <h4>ERC-20: Fungible Tokens</h4>
                            <span class="panel-badge">Most Popular</span>
                        </div>
                        <p>The most widely adopted token standard, perfect for creating fungible tokens that represent equal shares of property assets.</p>
                        <ul class="feature-list">
                            <li><span class="feature-icon">✓</span> Easily tradable on any exchange</li>
                            <li><span class="feature-icon">✓</span> Widely supported by wallets</li>
                            <li><span class="feature-icon">✓</span> Ideal for fractional ownership</li>
                        </ul>
                        <div class="code-preview">
                            <code>function transfer(address to, uint256 amount) public returns (bool)</code>
                        </div>
                    </div>
                    
                    <div class="standard-panel" id="erc721-panel">
                        <div class="panel-header">
                            <h4>ERC-721: Non-Fungible Tokens</h4>
                            <span class="panel-badge">Unique Assets</span>
                        </div>
                        <p>Specialized tokens for unique assets with specific characteristics and complete ownership history tracking.</p>
                        <ul class="feature-list">
                            <li><span class="feature-icon">✓</span> Unique property identifiers</li>
                            <li><span class="feature-icon">✓</span> Individual asset tracking</li>
                            <li><span class="feature-icon">✓</span> Complete ownership history</li>
                        </ul>
                        <div class="code-preview">
                            <code>function ownerOf(uint256 tokenId) public view returns (address)</code>
                        </div>
                    </div>
                    
                    <div class="standard-panel" id="erc1155-panel">
                        <div class="panel-header">
                            <h4>ERC-1155: Multi-Token Standard</h4>
                            <span class="panel-badge">Hybrid Solution</span>
                        </div>
                        <p>Advanced protocol supporting both fungible and non-fungible tokens in a single smart contract with enhanced efficiency.</p>
                        <ul class="feature-list">
                            <li><span class="feature-icon">✓</span> Multiple token types</li>
                            <li><span class="feature-icon">✓</span> Reduced gas costs</li>
                            <li><span class="feature-icon">✓</span> Flexible asset management</li>
                        </ul>
                        <div class="code-preview">
                            <code>function balanceOfBatch(address[] calldata accounts, uint256[] calldata ids) public view returns (uint256[] memory)</code>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Code showcase with cleaner design -->
        <div class="code-showcase">
                <h3 class="section-subheading">Smart Contract Example</h3>
            <div class="code-container">
                <div class="code-editor-header">
                    <div class="window-controls">
                        <span class="control red"></span>
                        <span class="control yellow"></span>
                        <span class="control green"></span>
                    </div>
                        <div class="file-name">sharmoToken.sol</div>
                    <div class="header-actions">
                        <button id="copy-code-btn" onclick="copyCodeToClipboard()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            <span>Copy</span>
                        </button>
                </div>
                </div>
                <div class="code-editor-body">
                    <div class="line-numbers">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                    <div class="code-content-wrapper">
                        <pre class="code-content"><code id="solidity-code">// SPDX-License-Identifier: MIT
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

/* OpenZeppelin Imports for Security & Standards */
import "@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol";
import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/security/ReentrancyGuard.sol";
import "@openzeppelin/contracts/utils/Counters.sol";

/* Main Contract Definition */
contract sharmoToken is ERC721URIStorage, ERC721Enumerable, Ownable, ReentrancyGuard {
    using Counters for Counters.Counter;
    Counters.Counter private _tokenIds;
    
    /* Property Data Structure */
    struct Property {
        uint256 id;          // Unique property identifier
        string location;     // Physical location of the property
        uint256 valuation;   // Current market value
        bool forSale;        // Whether property is listed for sale
        uint256 salePrice;   // Price if listed for sale
        string propertyType; // Residential, Commercial, etc.
        uint256 sqFootage;   // Square footage of the property
        uint256 createdAt;   // Timestamp when property was tokenized
        address originalOwner; // Original owner of the property
    }
    
    // Mapping from token ID to Property
    mapping(uint256 => Property) public properties;
    
    // Mapping from token ID to sale price
    mapping(uint256 => uint256) public propertyPrices;
    
    // Events
    event PropertyMinted(uint256 indexed tokenId, address indexed owner, string location, uint256 valuation);
    event PropertyListed(uint256 indexed tokenId, uint256 price);
    event PropertyUnlisted(uint256 indexed tokenId);
    event PropertySold(uint256 indexed tokenId, address indexed from, address indexed to, uint256 price);
    event PropertyValuationUpdated(uint256 indexed tokenId, uint256 oldValuation, uint256 newValuation);
    
    // Modifiers
    modifier onlyTokenOwner(uint256 tokenId) {
        require(ownerOf(tokenId) == msg.sender, "Not the owner of this property token");
        _;
    }
    
    modifier propertyExists(uint256 tokenId) {
        require(_exists(tokenId), "Property does not exist");
        _;
    }
    
    constructor() ERC721("Sharmo Real Estate Token", "SRET") Ownable(msg.sender) {}
    
    /**
     * @dev Mint a new property token
     * @param to Address that will own the property token
     * @param location Physical location of the property
     * @param valuation Initial valuation of the property
     * @param propertyType Type of property (Residential, Commercial, etc.)
     * @param sqFootage Square footage of the property
     * @param tokenURI URI for property metadata
     */
    function mintProperty(
        address to,
        string memory location,
        uint256 valuation,
        string memory propertyType,
        uint256 sqFootage,
        string memory tokenURI
    ) public onlyOwner returns (uint256) {
        uint256 newTokenId = _tokenIds.current();
        _mint(to, newTokenId);
        _setTokenURI(newTokenId, tokenURI);
        
        properties[newTokenId] = Property({
            id: newTokenId,
            location: location,
            valuation: valuation,
            forSale: false,
            salePrice: 0,
            propertyType: propertyType,
            sqFootage: sqFootage,
            createdAt: block.timestamp,
            originalOwner: to
        });
        
        emit PropertyMinted(newTokenId, to, location, valuation);
        
        _tokenIds.increment();
        return newTokenId;
    }
    
    /**
     * @dev List a property for sale
     * @param tokenId ID of the property token
     * @param price Sale price in wei
     */
    function listPropertyForSale(uint256 tokenId, uint256 price) 
        public 
        onlyTokenOwner(tokenId) 
        propertyExists(tokenId) 
    {
        require(price > 0, "Price must be greater than zero");
        
        properties[tokenId].forSale = true;
        properties[tokenId].salePrice = price;
        propertyPrices[tokenId] = price;
        
        emit PropertyListed(tokenId, price);
    }
    
    /**
     * @dev Remove property from sale
     * @param tokenId ID of the property token
     */
    function unlistProperty(uint256 tokenId) 
        public 
        onlyTokenOwner(tokenId) 
        propertyExists(tokenId) 
    {
        require(properties[tokenId].forSale, "Property is not for sale");
        
        properties[tokenId].forSale = false;
        properties[tokenId].salePrice = 0;
        delete propertyPrices[tokenId];
        
        emit PropertyUnlisted(tokenId);
    }
    
    /**
     * @dev Buy a property that is for sale
     * @param tokenId ID of the property token
     */
    function buyProperty(uint256 tokenId) 
        public 
        payable 
        propertyExists(tokenId) 
        nonReentrant 
    {
        Property storage property = properties[tokenId];
        require(property.forSale, "Property is not for sale");
        require(msg.value >= property.salePrice, "Insufficient funds sent");
        require(ownerOf(tokenId) != msg.sender, "Cannot buy your own property");
        
        address seller = ownerOf(tokenId);
        
        // Transfer ownership
        _transfer(seller, msg.sender, tokenId);
        
        // Update property details
        property.forSale = false;
        uint256 salePrice = property.salePrice;
        property.salePrice = 0;
        delete propertyPrices[tokenId];
        
        // Transfer funds to seller
        (bool success, ) = payable(seller).call{value: msg.value}("");
        require(success, "Transfer failed");
        
        emit PropertySold(tokenId, seller, msg.sender, salePrice);
    }
    
    /**
     * @dev Update property valuation
     * @param tokenId ID of the property token
     * @param newValuation New valuation amount
     */
    function updateValuation(uint256 tokenId, uint256 newValuation) 
        public 
        onlyOwner 
        propertyExists(tokenId) 
    {
        require(newValuation > 0, "Valuation must be greater than zero");
        
        uint256 oldValuation = properties[tokenId].valuation;
        properties[tokenId].valuation = newValuation;
        
        emit PropertyValuationUpdated(tokenId, oldValuation, newValuation);
    }
    
    /**
     * @dev Get all properties owned by an address
     * @param owner Address to check
     * @return Array of property token IDs
     */
    function getPropertiesOfOwner(address owner) public view returns (uint256[] memory) {
        uint256 balance = balanceOf(owner);
        uint256[] memory result = new uint256[](balance);
        
        for (uint256 i = 0; i < balance; i++) {
            result[i] = tokenOfOwnerByIndex(owner, i);
        }
        
        return result;
    }
    
    /**
     * @dev Get property details
     * @param tokenId ID of the property token
     * @return Property struct with details
     */
    function getPropertyDetails(uint256 tokenId) 
        public 
        view 
        propertyExists(tokenId) 
        returns (Property memory) 
    {
        return properties[tokenId];
    }
    
    /**
     * @dev Override functions to make ERC721URIStorage and ERC721Enumerable compatible
     */
    function _update(address to, uint256 tokenId, address auth)
        internal
        override(ERC721, ERC721Enumerable)
        returns (address)
    {
        return super._update(to, tokenId, auth);
    }

    function _increaseBalance(address account, uint128 value)
        internal
        override(ERC721, ERC721Enumerable)
    {
        super._increaseBalance(account, value);
    }

    function tokenURI(uint256 tokenId)
        public
        view
        override(ERC721, ERC721URIStorage)
        returns (string memory)
    {
        return super.tokenURI(tokenId);
    }

    function supportsInterface(bytes4 interfaceId)
        public
        view
        override(ERC721, ERC721Enumerable, ERC721URIStorage)
        returns (bool)
    {
        return super.supportsInterface(interfaceId);
    }
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
         </div>

        <!-- Benefits Section -->
        <div class="benefits-section">
            <h3 class="benefits-heading">Benefits of Tokenization</h3>
            
            <div class="benefits-grid">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 1l4 4-4 4"></path>
                            <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
                            <path d="M7 23l-4-4 4-4"></path>
                            <path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
                        </svg>
                    </div>
                    <h4>Increased Liquidity</h4>
                    <p>Transform illiquid real estate into easily tradable digital assets, enabling 24/7 global marketplace access.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                    </div>
                    <h4>Fractional Ownership</h4>
                    <p>Invest in property with as little as $50, making real estate accessible to everyone regardless of financial status.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                    </div>
                    <h4>Transparent & Secure</h4>
                    <p>Blockchain technology ensures complete transparency in ownership records, transactions, and property details.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </div>
                    <h4>Faster Transactions</h4>
                    <p>Complete property transactions in minutes rather than months, eliminating traditional closing delays and paperwork.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                    </div>
                    <h4>Enhanced Security</h4>
                    <p>Smart contracts automatically enforce transaction rules and property rights, reducing fraud risk and disputes.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                    </div>
                    <h4>Global Access</h4>
                    <p>Invest in real estate anywhere in the world regardless of geographic location, eliminating cross-border barriers.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- CTA Button -->
    <div class="token-action">
        <a href="/marketplace.html" class="btn-primary">
            <span>Explore Available Properties</span>
            <svg viewBox="0 0 24 24" width="16" height="16">
                <path d="M14 5l7 7m0 0l-7 7m7-7H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </a>
    </div>
</section>

<!-- Add styles for the How It Works page -->
<link rel="stylesheet" href="css/sections/tokenization.css">
<link rel="stylesheet" href="css/sections/benefits.css">
<link rel="stylesheet" href="css/components/code-showcase.css">

<!-- Add scripts for the How It Works page -->
<script src="js/how-it-works.js"></script>
<script src="js/code-showcase.js"></script> 