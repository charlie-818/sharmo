<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Authentication - Sharmo Developer Documentation</title>
    <!-- Add favicon -->
    <link rel="icon" type="image/png" href="/images/logo.png">
    <link rel="shortcut icon" type="image/png" href="/images/logo.png">
    <!-- Base styles -->
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/layout.css">
    <!-- Components -->
    <link rel="stylesheet" href="../css/components/navigation.css">
    <link rel="stylesheet" href="../css/components/hero.css">
    <link rel="stylesheet" href="../css/components/footer.css">
    <link rel="stylesheet" href="../css/components/cards.css">
    <link rel="stylesheet" href="../css/components/forms.css">
    <link rel="stylesheet" href="../css/components/code-showcase.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="../js/common.js"></script>
    <script src="../js/main.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-json.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism-tomorrow.min.css">

    <style>
        body {
            padding-top: 80px !important;
            background-color: #f8fafc !important;
            color: #334155 !important;
        }
        
        .docs-container {
            display: grid !important;
            grid-template-columns: 250px 1fr !important;
            gap: 40px !important;
            max-width: 1200px !important;
            margin: 40px auto !important;
            padding: 0 20px !important;
            position: relative !important;
        }
        
        .docs-sidebar {
            position: sticky !important;
            top: 100px !important;
            height: calc(100vh - 120px) !important;
            overflow-y: auto !important;
            padding-right: 15px !important;
        }
        
        .docs-nav {
            background-color: #fff !important;
            border-radius: 8px !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
            overflow: hidden !important;
        }
        
        .docs-nav-section {
            border-bottom: 1px solid #e2e8f0 !important;
            padding: 15px 0 !important;
        }
        
        .docs-nav-section:last-child {
            border-bottom: none !important;
        }
        
        .docs-nav-title {
            font-weight: 600 !important;
            color: #1e293b !important;
            font-size: 0.9rem !important;
            padding: 0 20px !important;
            margin-bottom: 10px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.05em !important;
        }
        
        .docs-nav-items {
            list-style: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        
        .docs-nav-item {
            padding: 0 !important;
            margin: 0 !important;
        }
        
        .docs-nav-link {
            display: block !important;
            padding: 8px 20px !important;
            color: #64748b !important;
            text-decoration: none !important;
            font-size: 0.9rem !important;
            transition: all 0.2s ease !important;
            border-left: 3px solid transparent !important;
        }
        
        .docs-nav-link:hover {
            background-color: #f1f5f9 !important;
            color: #4f46e5 !important;
        }
        
        .docs-nav-link.active {
            background-color: #f8fafc !important;
            color: #4f46e5 !important;
            border-left-color: #4f46e5 !important;
            font-weight: 500 !important;
        }
        
        .docs-content {
            background-color: #fff !important;
            border-radius: 8px !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
            padding: 40px !important;
            min-height: calc(100vh - 200px) !important;
            max-width: 800px !important;
            width: 100% !important;
        }
        
        .docs-content h1 {
            font-size: 2.5rem !important;
            margin-bottom: 25px !important;
            color: #1e293b !important;
            font-weight: 700 !important;
            padding-bottom: 15px !important;
            border-bottom: 1px solid #e2e8f0 !important;
        }
        
        .docs-content h2 {
            font-size: 1.8rem !important;
            margin-top: 40px !important;
            margin-bottom: 20px !important;
            color: #1e293b !important;
            font-weight: 600 !important;
            position: relative !important;
            padding-bottom: 10px !important;
        }
        
        .docs-content h2::after {
            content: '' !important;
            position: absolute !important;
            bottom: 0 !important;
            left: 0 !important;
            height: 3px !important;
            width: 50px !important;
            background-color: #4f46e5 !important;
            border-radius: 3px !important;
        }
        
        .docs-content h3 {
            font-size: 1.4rem !important;
            margin-top: 30px !important;
            margin-bottom: 15px !important;
            color: #334155 !important;
            font-weight: 600 !important;
        }
        
        .code-block {
            margin: 20px 0 !important;
            border-radius: 8px !important;
            overflow: hidden !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
        }
        
        .code-header {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            background: #1e293b !important;
            padding: 10px 15px !important;
        }
        
        .code-title {
            color: #f1f5f9 !important;
            font-family: 'Fira Code', monospace !important;
            font-size: 0.9rem !important;
        }
        
        .copy-btn {
            background: transparent !important;
            border: none !important;
            color: #cbd5e1 !important;
            cursor: pointer !important;
            font-size: 0.9rem !important;
            display: flex !important;
            align-items: center !important;
            gap: 5px !important;
        }
        
        .copy-btn:hover {
            color: #f1f5f9 !important;
        }
        
        .on-this-page {
            margin-top: 30px !important;
            padding: 15px !important;
            background-color: #f8fafc !important;
            border-radius: 8px !important;
            border: 1px solid #e2e8f0 !important;
        }
        
        .on-this-page-title {
            font-weight: 600 !important;
            color: #1e293b !important;
            margin-bottom: 10px !important;
            font-size: 0.9rem !important;
        }
        
        .on-this-page-items {
            list-style: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        
        .on-this-page-item {
            margin-bottom: 5px !important;
            font-size: 0.85rem !important;
        }
        
        .on-this-page-link {
            color: #64748b !important;
            text-decoration: none !important;
            display: block !important;
            padding: 4px 0 !important;
            transition: all 0.2s ease !important;
        }
        
        .on-this-page-link:hover {
            color: #4f46e5 !important;
        }
        
        .docs-footer {
            margin-top: 50px !important;
            padding-top: 20px !important;
            border-top: 1px solid #e2e8f0 !important;
            display: flex !important;
            justify-content: space-between !important;
        }
        
        .docs-footer-link {
            display: flex !important;
            align-items: center !important;
            color: #4f46e5 !important;
            text-decoration: none !important;
            font-weight: 500 !important;
            padding: 8px 0 !important;
        }
        
        .docs-footer-link:hover {
            color: #3730a3 !important;
        }
        
        .docs-footer-link-prev i {
            margin-right: 8px !important;
        }
        
        .docs-footer-link-next i {
            margin-left: 8px !important;
        }
        
        @media (max-width: 992px) {
            .docs-container {
                grid-template-columns: 1fr !important;
            }
            
            .docs-sidebar {
                display: none !important;
            }
        }
        
        .docs-content pre {
            border-radius: 8px !important;
            margin: 20px 0 !important;
            overflow: auto !important; /* Ensure horizontal scrolling instead of overflow */
            max-width: 100% !important; /* Limit width to parent container */
        }
        
        .docs-content pre code {
            display: block !important;
            overflow-x: auto !important;
            padding: 1em !important;
            white-space: pre !important;
        }
    </style>
</head>
<body>
    <!-- Header Container -->
    <div id="header-container"></div>
    
    <!-- Documentation Content -->
    <main class="docs-container">
        <!-- Sidebar Navigation -->
        <aside class="docs-sidebar">
            <nav class="docs-nav">
                <div class="docs-nav-section">
                    <h4 class="docs-nav-title">Getting Started</h4>
                    <ul class="docs-nav-items">
                        <li class="docs-nav-item"><a href="../docs/getting-started.html" class="docs-nav-link">Introduction</a></li>
                        <li class="docs-nav-item"><a href="../docs/api-authentication.html" class="docs-nav-link active">API Authentication</a></li>
                        <li class="docs-nav-item"><a href="../docs/integration-guide.html" class="docs-nav-link">Integration Guide</a></li>
                    </ul>
                </div>
                
                <div class="docs-nav-section">
                    <h4 class="docs-nav-title">API Reference</h4>
                    <ul class="docs-nav-items">
                        <li class="docs-nav-item"><a href="../docs/api-reference.html#authentication" class="docs-nav-link">Authentication</a></li>
                        <li class="docs-nav-item"><a href="../docs/api-reference.html#properties" class="docs-nav-link">Properties</a></li>
                        <li class="docs-nav-item"><a href="../docs/api-reference.html#tokens" class="docs-nav-link">Tokens</a></li>
                        <li class="docs-nav-item"><a href="../docs/api-reference.html#transactions" class="docs-nav-link">Transactions</a></li>
                        <li class="docs-nav-item"><a href="../docs/api-reference.html#analytics" class="docs-nav-link">Analytics</a></li>
                        <li class="docs-nav-item"><a href="../docs/api-reference.html#users" class="docs-nav-link">Users</a></li>
                    </ul>
                </div>
                
                <div class="docs-nav-section">
                    <h4 class="docs-nav-title">Guides</h4>
                    <ul class="docs-nav-items">
                        <li class="docs-nav-item"><a href="../docs/sdk-quick-start.html" class="docs-nav-link">SDK Quick Start</a></li>
                        <li class="docs-nav-item"><a href="../docs/webhook-guide.html" class="docs-nav-link">Webhook Guide</a></li>
                        <li class="docs-nav-item"><a href="../docs/code-examples.html" class="docs-nav-link">Code Examples</a></li>
                    </ul>
                </div>
            </nav>
            
            <div class="on-this-page">
                <h4 class="on-this-page-title">On This Page</h4>
                <ul class="on-this-page-items">
                    <li class="on-this-page-item"><a href="#introduction" class="on-this-page-link">Introduction</a></li>
                    <li class="on-this-page-item"><a href="#api-keys" class="on-this-page-link">API Keys</a></li>
                    <li class="on-this-page-item"><a href="#oauth" class="on-this-page-link">OAuth 2.0</a></li>
                    <li class="on-this-page-item"><a href="#jwt" class="on-this-page-link">JWT Authentication</a></li>
                    <li class="on-this-page-item"><a href="#best-practices" class="on-this-page-link">Best Practices</a></li>
                </ul>
            </div>
        </aside>
        
        <!-- Main Content -->
        <article class="docs-content">
            <h1>API Authentication</h1>
            
            <p>
                This guide explains the authentication methods supported by the Sharmo API and how to implement them securely in your applications.
            </p>
            
            <h2 id="introduction">Introduction</h2>
            
            <p>
                The Sharmo API uses secure authentication methods to ensure that only authorized applications and users can access the API. We currently support three authentication methods:
            </p>
            
            <ul>
                <li><strong>API Keys</strong> - Simple authentication for server-to-server integration</li>
                <li><strong>OAuth 2.0</strong> - Industry-standard protocol for authorization</li>
                <li><strong>JWT (JSON Web Tokens)</strong> - Compact, self-contained tokens for secure information transmission</li>
            </ul>
            
            <h2 id="api-keys">API Keys</h2>
            
            <p>
                API keys provide a simple way to authenticate requests to the Sharmo API without involving end-users.
            </p>
            
            <h3>When to Use API Keys</h3>
            
            <ul>
                <li>Server-to-server communication</li>
                <li>Backend jobs and automated scripts</li>
                <li>Applications that don't need to access user-specific data</li>
            </ul>
            
            <h3>Getting an API Key</h3>
            
            <ol>
                <li>Log in to the <a href="https://sharmo.io/developers/">Sharmo Developer Portal</a></li>
                <li>Navigate to "Applications" and select your application</li>
                <li>Go to the "API Keys" tab</li>
                <li>Click "Generate New API Key"</li>
                <li>Store the API key securely (it will only be shown once)</li>
            </ol>
            
            <h3>Using API Keys</h3>
            
            <p>
                Include your API key in the <code>Authorization</code> header of your HTTP requests:
            </p>
            
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">API Key Example</span>
                    <button class="copy-btn">
                        <i class="far fa-copy"></i> 
                        <span>Copy</span>
                    </button>
                </div>
<pre><code class="language-bash">curl -X GET "https://api.sharmo.io/v1/properties" \
     -H "Authorization: Bearer YOUR_API_KEY" \
     -H "Content-Type: application/json"</code></pre>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">JavaScript Example</span>
                    <button class="copy-btn">
                        <i class="far fa-copy"></i> 
                        <span>Copy</span>
                    </button>
                </div>
<pre><code class="language-javascript">const fetchProperties = async () => {
  const response = await fetch('https://api.sharmo.io/v1/properties', {
    method: 'GET',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    }
  });
  
  const data = await response.json();
  return data;
};</code></pre>
            </div>
            
            <h2 id="oauth">OAuth 2.0</h2>
            
            <p>
                OAuth 2.0 is the industry-standard protocol for authorization that enables third-party applications to obtain limited access to a user's account.
            </p>
            
            <h3>When to Use OAuth</h3>
            
            <ul>
                <li>Applications acting on behalf of users</li>
                <li>Accessing user-specific data or performing actions as a user</li>
                <li>Web applications, mobile apps, and single-page applications</li>
            </ul>
            
            <h3>OAuth Flow</h3>
            
            <p>
                Sharmo supports the following OAuth 2.0 flows:
            </p>
            
            <ul>
                <li><strong>Authorization Code Flow</strong> - For server-side web applications</li>
                <li><strong>Authorization Code Flow with PKCE</strong> - For mobile and single-page applications</li>
                <li><strong>Client Credentials Flow</strong> - For server-to-server applications</li>
            </ul>
            
            <h3>Implementing Authorization Code Flow</h3>
            
            <ol>
                <li>Register your application in the Developer Portal</li>
                <li>Redirect the user to the Sharmo authorization endpoint</li>
                <li>Sharmo redirects back to your application with an authorization code</li>
                <li>Exchange the authorization code for an access token</li>
                <li>Use the access token to authenticate API requests</li>
            </ol>
            
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">Step 1: Redirect to Authorization Endpoint</span>
                    <button class="copy-btn">
                        <i class="far fa-copy"></i> 
                        <span>Copy</span>
                    </button>
                </div>
<pre><code class="language-javascript">const clientId = 'YOUR_CLIENT_ID';
const redirectUri = 'https://yourapp.com/callback';
const scope = 'read:properties write:transactions';

const authUrl = `https://auth.sharmo.io/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=code&scope=${encodeURIComponent(scope)}`;

// Redirect the user
window.location.href = authUrl;</code></pre>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">Step 2: Exchange Code for Token</span>
                    <button class="copy-btn">
                        <i class="far fa-copy"></i> 
                        <span>Copy</span>
                    </button>
                </div>
<pre><code class="language-javascript">const exchangeCodeForToken = async (code) => {
  const response = await fetch('https://auth.sharmo.io/token', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    },
    body: new URLSearchParams({
      grant_type: 'authorization_code',
      client_id: 'YOUR_CLIENT_ID',
      client_secret: 'YOUR_CLIENT_SECRET',
      code: code,
      redirect_uri: 'https://yourapp.com/callback'
    })
  });
  
  const tokens = await response.json();
  
  // Store tokens securely
  localStorage.setItem('access_token', tokens.access_token);
  localStorage.setItem('refresh_token', tokens.refresh_token);
  
  return tokens;
};</code></pre>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">Step 3: Use Access Token</span>
                    <button class="copy-btn">
                        <i class="far fa-copy"></i> 
                        <span>Copy</span>
                    </button>
                </div>
<pre><code class="language-javascript">const getUserProfile = async () => {
  const accessToken = localStorage.getItem('access_token');
  
  const response = await fetch('https://api.sharmo.io/v1/user/profile', {
    method: 'GET',
    headers: {
      'Authorization': `Bearer ${accessToken}`,
      'Content-Type': 'application/json'
    }
  });
  
  return response.json();
};</code></pre>
            </div>
            
            <h3>Token Refresh</h3>
            
            <p>
                Access tokens expire after a set period (usually 1 hour). Use the refresh token to get a new access token:
            </p>
            
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">Refreshing Access Tokens</span>
                    <button class="copy-btn">
                        <i class="far fa-copy"></i> 
                        <span>Copy</span>
                    </button>
                </div>
<pre><code class="language-javascript">const refreshAccessToken = async () => {
  const refreshToken = localStorage.getItem('refresh_token');
  
  const response = await fetch('https://auth.sharmo.io/token', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    },
    body: new URLSearchParams({
      grant_type: 'refresh_token',
      client_id: 'YOUR_CLIENT_ID',
      client_secret: 'YOUR_CLIENT_SECRET',
      refresh_token: refreshToken
    })
  });
  
  const tokens = await response.json();
  
  localStorage.setItem('access_token', tokens.access_token);
  // Note: Sometimes a new refresh token is issued as well
  if (tokens.refresh_token) {
    localStorage.setItem('refresh_token', tokens.refresh_token);
  }
  
  return tokens;
};</code></pre>
            </div>
            
            <h2 id="jwt">JWT Authentication</h2>
            
            <p>
                JSON Web Tokens (JWT) are an open standard that defines a compact and self-contained way for securely transmitting information as a JSON object.
            </p>
            
            <h3>When to Use JWT</h3>
            
            <ul>
                <li>Single sign-on (SSO) scenarios</li>
                <li>Stateless API authentication</li>
                <li>Custom authentication flows</li>
            </ul>
            
            <h3>JWT Structure</h3>
            
            <p>
                JWTs consist of three parts separated by dots:
            </p>
            
            <ol>
                <li><strong>Header</strong> - Contains the token type and signing algorithm</li>
                <li><strong>Payload</strong> - Contains the claims (user info, permissions, etc.)</li>
                <li><strong>Signature</strong> - Verifies the token hasn't been altered</li>
            </ol>
            
            <h3>Using JWT with Sharmo API</h3>
            
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">JWT Example</span>
                    <button class="copy-btn">
                        <i class="far fa-copy"></i> 
                        <span>Copy</span>
                    </button>
                </div>
<pre><code class="language-javascript">// JWT tokens are typically obtained after authentication
// with the Sharmo auth service

const makeAuthenticatedRequest = async () => {
  const jwt = localStorage.getItem('jwt_token');
  
  const response = await fetch('https://api.sharmo.io/v1/protected-resource', {
    method: 'GET',
    headers: {
      'Authorization': `Bearer ${jwt}`,
      'Content-Type': 'application/json'
    }
  });
  
  return response.json();
};</code></pre>
            </div>
            
            <h2 id="best-practices">Security Best Practices</h2>
            
            <h3>API Key Security</h3>
            
            <ul>
                <li>Never expose API keys in client-side code or public repositories</li>
                <li>Use environment variables to store API keys</li>
                <li>Implement key rotation policies</li>
                <li>Use API keys with the minimum necessary permissions</li>
            </ul>
            
            <h3>OAuth Security</h3>
            
            <ul>
                <li>Always use HTTPS for all OAuth requests</li>
                <li>Validate redirect URIs to prevent open redirects</li>
                <li>Store refresh tokens securely (server-side if possible)</li>
                <li>Use PKCE for mobile and single-page applications</li>
                <li>Implement token validation on the client side</li>
            </ul>
            
            <h3>JWT Security</h3>
            
            <ul>
                <li>Validate JWT signatures and expiration</li>
                <li>Do not store sensitive data in JWTs</li>
                <li>Consider token size to avoid performance issues</li>
                <li>Use secure cookies to store tokens in web applications</li>
            </ul>
            
            <h3>General Security Practices</h3>
            
            <ul>
                <li>Implement proper error handling</li>
                <li>Use secure storage for tokens</li>
                <li>Revoke tokens when no longer needed</li>
                <li>Implement rate limiting and monitoring</li>
                <li>Keep authentication libraries updated</li>
            </ul>
            
            <!-- Documentation Footer with Navigation -->
            <div class="docs-footer">
                <a href="../docs/getting-started.html" class="docs-footer-link docs-footer-link-prev">
                    <i class="fas fa-arrow-left"></i> Introduction
                </a>
                <a href="../docs/integration-guide.html" class="docs-footer-link docs-footer-link-next">
                    Integration Guide <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </article>
    </main>
    
    <!-- Footer -->
    <footer>
        <div id="footer-container"></div>
    </footer>
    
    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load the header
            fetch('/components/header.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('header-container').innerHTML = html;
                })
                .catch(error => {
                    console.error('Error loading header:', error);
                });
            
            // Load the footer
            fetch('/components/footer.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('footer-container').innerHTML = html;
                })
                .catch(error => {
                    console.error('Error loading footer:', error);
                });
            
            // Copy code functionality
            const copyButtons = document.querySelectorAll('.copy-btn');
            
            copyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const codeBlock = this.closest('.code-block').querySelector('code');
                    const code = codeBlock.textContent;
                    
                    navigator.clipboard.writeText(code).then(() => {
                        const spanText = this.querySelector('span');
                        const originalText = spanText.textContent;
                        
                        spanText.textContent = 'Copied!';
                        
                        setTimeout(() => {
                            spanText.textContent = originalText;
                        }, 2000);
                    });
                });
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 100,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html> 